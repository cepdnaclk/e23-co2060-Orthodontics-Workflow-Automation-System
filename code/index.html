<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OWAS | Login</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <main class="login-wrap">
    <section class="login-card">
      <h1>Orthodontics Workflow Automation System</h1>
      <p class="footer-note">Secure login for clinic operations and student workflows.</p>

      <form id="loginForm">
        <label>Email
          <input id="email" type="email" placeholder="user@clinic.com" required />
        </label>
        <label>Password
          <input id="password" type="password" required />
        </label>
        <div class="actions">
          <button type="submit">Sign In</button>
          <button type="button" id="resetPasswordBtn" class="secondary">Reset Password</button>
        </div>
      </form>

      <section id="configSection">
        <hr />
        <h3>Supabase Configuration</h3>
        <p class="footer-note">Set once per browser. Required for GitHub Pages deployment.</p>
        <form id="configForm">
          <label>Supabase URL
            <input id="supabaseUrl" type="url" placeholder="https://xxxx.supabase.co" required />
          </label>
          <label>Anon Key
            <textarea id="supabaseAnonKey" placeholder="eyJ..." required></textarea>
          </label>
          <button type="submit">Save Config</button>
        </form>
      </section>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module">
    import { initLoginPage } from './js/auth.js';
    import { getSupabaseConfig } from './js/supabaseClient.js';

    initLoginPage();

    const { SUPABASE_URL, SUPABASE_ANON_KEY } = getSupabaseConfig();
    const hasHardcodedConfig =
      !SUPABASE_URL.includes('YOUR-PROJECT') &&
      !SUPABASE_ANON_KEY.includes('YOUR-ANON-KEY');

    if (hasHardcodedConfig) {
      const configSection = document.getElementById('configSection');
      if (configSection) configSection.classList.add('hidden');
    }
  </script>
</body>
</html>
